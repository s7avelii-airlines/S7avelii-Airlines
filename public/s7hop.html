<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>S7avelii Shop</title>
  <style>
    *,*::before,*::after{box-sizing:border-box}
    body{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Inter,Arial,sans-serif;color:#1c1c1c;background:#fff}
    a{text-decoration:none;color:inherit}
    button{font:inherit}

    :root{
      --s7:#b4e600;
      --s7-dark:#95c900;
      --line:#e5e7eb;
      --bg:#f6f7f9;
      --shadow:0 1px 2px rgba(0,0,0,.06),0 4px 16px rgba(0,0,0,.06);
      --radius:14px;
      --radius-lg:18px;
    }

    .topbar{position:sticky;top:0;z-index:40;background:#fff;border-bottom:1px solid var(--line)}
    .topbar-inner{max-width:1220px;margin:0 auto;display:flex;align-items:center;gap:16px;padding:14px 20px;flex-wrap:wrap}

    .logo{display:flex;align-items:center;gap:10px;font-weight:700}
    .logo-img{width:36px;height:36px;border-radius:50%;object-fit:cover}

    .catalog-btn{display:flex;align-items:center;gap:10px;background:var(--bg);border:1px solid var(--line);padding:10px 14px;border-radius:12px;white-space:nowrap}
    .search{flex:1;display:flex;align-items:center;background:var(--bg);border:1px solid var(--line);padding:10px 12px;border-radius:12px;gap:10px;min-width:160px}
    .search input{border:0;outline:0;background:transparent;width:100%}

    .top-actions{display:flex;align-items:center;gap:18px;margin-left:auto;flex-wrap:wrap}

    .crumbs{max-width:1220px;margin:14px auto 0;padding:0 20px;color:#6b7280;font-size:14px}

    .page{max-width:1220px;margin:0 auto;padding:8px 20px 60px}
    .page h1{font-size:42px;margin:16px 0 18px}

    .content{display:grid;grid-template-columns:260px 1fr;gap:26px}

    .filter{background:#fff;border:1px solid var(--line);border-radius:var(--radius);padding:18px}
    .filter h3{margin:0 0 10px;font-size:16px}

    .sort{display:flex;justify-content:flex-end;margin-bottom:8px}

    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:18px}

    .card{border:1px solid var(--line);border-radius:var(--radius-lg);overflow:hidden;background:#fff;box-shadow:var(--shadow);display:flex;flex-direction:column}
    .thumb{background:#f9fafb;position:relative;display:grid;place-items:center;height:210px}
    .heart{position:absolute;right:12px;top:12px;width:26px;height:26px;border-radius:50%;display:grid;place-items:center;background:#fff;border:1px solid var(--line)}
    .card-body{padding:12px 14px 14px;display:flex;flex-direction:column;gap:8px;flex:1}
    .price{font-weight:700}
    .title{color:#1a1a1a;min-height:44px}
    .btn{display:inline-flex;align-items:center;justify-content:center;background:var(--s7);border:0;border-radius:12px;padding:10px 14px;font-weight:700;margin-top:auto;color:#111}
    .btn:hover{background:var(--s7-dark);cursor:pointer}
    .btn.small{padding:6px 10px;border-radius:10px;font-weight:600;font-size:14px}

    /* cart badge */
    .cart-btn{position:relative;display:inline-flex;align-items:center;gap:8px;padding:8px 10px;border-radius:10px;background:transparent;border:1px solid var(--line)}
    .cart-count{position:absolute;right:-6px;top:-6px;background:var(--s7);color:#111;border-radius:50%;width:22px;height:22px;display:grid;place-items:center;font-weight:700;border:2px solid #fff}

    /* modal / account panel */
    .overlay{position:fixed;inset:0;background:rgba(0,0,0,0.35);display:none;align-items:center;justify-content:center;z-index:60}
    .panel{width:920px;max-width:96%;background:#fff;border-radius:16px;box-shadow:var(--shadow);overflow:hidden;display:flex;flex-direction:column;max-height:90vh}
    .panel-header{display:flex;align-items:center;justify-content:space-between;padding:16px 20px;border-bottom:1px solid var(--line)}
    .panel-body{padding:16px 20px;overflow:auto}
    .cart-item{display:flex;gap:12px;align-items:center;padding:10px 0;border-bottom:1px dashed #f0f0f0}
    .cart-item img{width:72px;height:72px;object-fit:cover;border-radius:8px;background:#fafafa}
    .qty-controls{display:flex;align-items:center;gap:8px}
    .muted{color:#6b7280;font-size:13px}

    /* toast */
    .toast{position:fixed;right:16px;bottom:16px;background:#111;color:#fff;padding:10px 14px;border-radius:10px;display:none;z-index:70}

    /* –ê–¥–∞–ø—Ç–∏–≤ */
    @media (max-width: 900px){
      .content{grid-template-columns:1fr}
      .page h1{font-size:34px}
      .filter{margin-bottom:20px}
      .cart-count{right:-4px;top:-4px;width:20px;height:20px}
    }

    @media (max-width: 600px){
      .topbar-inner{gap:10px;padding:10px;flex-direction:column;align-items:flex-start}
      .top-actions{margin-left:0;gap:12px}
      .search{width:100%}
      .page h1{font-size:28px}
      .crumbs{font-size:12px}
    }
  </style>
</head>
<body>
  <header class="topbar">
    <div class="topbar-inner">
      <a class="logo" href="#">
        <img src="images/photo_5276207082657412564_y.avif" alt="–õ–æ–≥–æ—Ç–∏–ø" class="logo-img">
      </a>
      <a class="catalog-btn" href="index.html">–ì–ª–∞–≤–Ω–∞—è</a>
      <label class="search"><input placeholder="–ü–æ–∏—Å–∫" /></label>
      <nav class="top-actions">
        <!-- –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø–∞–Ω–µ–ª—å -->
        <button id="open-account" class="catalog-btn">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</button>

        <button id="open-cart" class="cart-btn" title="–û—Ç–∫—Ä—ã—Ç—å –∫–æ—Ä–∑–∏–Ω—É">
          üõí –ö–æ—Ä–∑–∏–Ω–∞
          <span id="cart-count" class="cart-count">0</span>
        </button>
      </nav>
    </div>
  </header>

  <div class="crumbs">–ì–ª–∞–≤–Ω–∞—è ¬∑ –¢–æ–≤–∞—Ä—ã S7avelii Airlines </div>

  <main class="page">
    <h1>–¢–æ–≤–∞—Ä—ã</h1>

    <div class="content">
      <aside>
        <div class="filter">
          <h3>–¶–µ–Ω–∞ —Ç–æ–≤–∞—Ä–∞</h3>
          <label>–æ—Ç <input id="min-price" type="number" value="500" style="width:100%;padding:8px;margin:6px 0"></label>
          <label>–¥–æ <input id="max-price" type="number" value="5000" style="width:100%;padding:8px;margin:6px 0"></label>
          <h3>–ò–∑–≥–æ—Ç–æ–≤–ª–µ–Ω –≤</h3>
          <label><input id="country-ru" type="checkbox"> –†–æ—Å—Å–∏—è</label>
        </div>
      </aside>

      <section>
        <div class="sort">
          <select id="sort-select">
            <option value="popular">–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ</option>
            <option value="cheap">–°–Ω–∞—á–∞–ª–∞ –¥–µ—à–µ–≤—ã–µ</option>
            <option value="expensive">–°–Ω–∞—á–∞–ª–∞ –¥–æ—Ä–æ–≥–∏–µ</option>
          </select>
        </div>

        <div class="grid" id="product-grid"></div>
      </section>
    </div>
  </main>

  <!-- Account / Cart overlay -->
  <div id="overlay" class="overlay" aria-hidden="true">
    <div class="panel" role="dialog" aria-modal="true">
      <div class="panel-header">
        <div>
          <strong>–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç ‚Äî –ö–æ—Ä–∑–∏–Ω–∞</strong>
          <div class="muted" id="panel-sub">–ó–¥–µ—Å—å —Ö—Ä–∞–Ω—è—Ç—Å—è —Ç–æ–≤–∞—Ä—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –¥–æ–±–∞–≤–∏–ª–∏</div>
        </div>
        <div>
          <button id="clear-cart" class="btn small" style="background:#fff;border:1px solid var(--line)">–û—á–∏—Å—Ç–∏—Ç—å</button>
          <button id="close-overlay" class="btn small" style="margin-left:8px">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
      </div>

      <div class="panel-body" id="panel-body">
        <!-- –°—é–¥–∞ –±—É–¥—É—Ç —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å—Å—è –ø–æ–∑–∏—Ü–∏–∏ –∫–æ—Ä–∑–∏–Ω—ã -->
      </div>

      <div style="padding:16px 20px;border-top:1px solid var(--line);display:flex;justify-content:space-between;align-items:center">
        <div class="muted" id="total-text">–ò—Ç–æ–≥–æ: 0 ‚ÇΩ</div>
        <div>
          <button id="checkout" class="btn small">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
        </div>
      </div>
    </div>
  </div>

  <div id="toast" class="toast"></div>

  <script>
    /* ------------- Utilities: load/save cart ------------- */
    const CART_KEY = 's7_cart';

    function loadCart() {
      try {
        return JSON.parse(localStorage.getItem(CART_KEY) || '[]');
      } catch (e) { return []; }
    }
    function saveCart(cart) {
      localStorage.setItem(CART_KEY, JSON.stringify(cart));
    }

    /* ------------- S7Cart API (–ø–æ —Ç–≤–æ–µ–º—É –ø—Ä–∏–º–µ—Ä—É) ------------- */
    const S7Cart = {
      addItem(item) {
        // item: { id, title, price, image, qty }
        const cart = loadCart();
        const idx = cart.findIndex(i => String(i.id) === String(item.id));
        if (idx >= 0) cart[idx].qty = (Number(cart[idx].qty)||0) + (Number(item.qty)||1);
        else cart.push(Object.assign({ qty: 1 }, item));
        saveCart(cart);
        renderCartBadge();
        renderCartPanel();
      },
      changeQty(index, delta) {
        const cart = loadCart();
        if (!cart[index]) return;
        cart[index].qty = Math.max(0, (Number(cart[index].qty)||0)+delta);
        if (cart[index].qty<=0) cart.splice(index,1);
        saveCart(cart);
        renderCartBadge();
        renderCartPanel();
      },
      removeItem(index) {
        const cart = loadCart();
        cart.splice(index,1);
        saveCart(cart);
        renderCartBadge();
        renderCartPanel();
      },
      clear() { saveCart([]); renderCartBadge(); renderCartPanel(); },
      getCart() { return loadCart(); }
    };

    /* ------------- Products data (extend with id + numeric price) ------------- */
    const products = [
      {
        id: "note-1",
        price: 550,
        priceText: "550 ‚ÇΩ",
        title: "–ë–ª–æ–∫–Ω–æ—Ç S7avelii Airlnes",
        image: "images/photo_5330078908990750485_y.avif"
      },
      {
        id: "combo-1",
        price: 2350,
        priceText: "2 350 ‚ÇΩ",
        title: "–ö–æ–º–±–æ –ë–ª–æ–∫–Ω–æ—Ç + –§—É—Ç–±–æ–ª–∫–∞",
        image: "images/photo_5330078908990750484_y.avif"
      },
      {
        id: "shirt-1",
        price: 1900,
        priceText: "1 900 ‚ÇΩ",
        title: "–§–∏—Ä–º–µ–Ω–Ω–∞—è —Ñ—É—Ç–±–æ–ª–∫–∞ S7avelii Airlines",
        image: "images/photo_5332515869139530693_y.avif"
      },
      {
        id: "combo-2",
        price: 4500,
        priceText: "4 500 ‚ÇΩ",
        title: "–ö–æ–º–±–æ –ü—É—Ç–µ—à–µ—Å—Ç–≤–µ–Ω–Ω–∏–∫ ",
        image: "images/photo_5330078908990750483_y.avif"
      }
    ];

    /* ------------- Render products ------------- */
    const grid = document.getElementById("product-grid");

    function createCard(p) {
      const card = document.createElement("article");
      card.className = "card";
      card.innerHTML = `
        <div class="thumb">
          <img src="${p.image}" alt="${p.title}" style="max-height:100%; max-width:100%; object-fit:contain;">
          <div class="heart">‚ô°</div>
        </div>
        <div class="card-body">
          <div class="price">${p.priceText}</div>
          <div class="title">${p.title}</div>
          <div style="display:flex;align-items:center;gap:8px;margin-top:auto">
            <button class="btn add-to-cart">–í –∫–æ—Ä–∑–∏–Ω—É</button>
            <button class="btn small" onclick="location.href='#'">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
          </div>
        </div>`;
      // bind add to cart
      const addBtn = card.querySelector('.add-to-cart');
      addBtn.addEventListener('click', () => {
        S7Cart.addItem({ id: p.id, title: p.title, price: p.price, image: p.image, qty: 1 });
        showToast(`–î–æ–±–∞–≤–ª–µ–Ω–æ: ${p.title}`);
        // –∫—Ä–∞—Ç–∫–∞—è –≤–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å
        addBtn.textContent = '–î–æ–±–∞–≤–ª–µ–Ω–æ';
        setTimeout(()=> addBtn.textContent = '–í –∫–æ—Ä–∑–∏–Ω—É', 1200);
      });
      return card;
    }

    function renderProducts(list = products) {
      grid.innerHTML = '';
      list.forEach(p => grid.appendChild(createCard(p)));
    }

    renderProducts();

    /* ------------- Cart badge ------------- */
    const cartCountEl = document.getElementById('cart-count');
    function renderCartBadge() {
      const cart = loadCart();
      const totalQty = cart.reduce((s,i)=>s + (Number(i.qty)||0), 0);
      cartCountEl.textContent = totalQty;
    }
    renderCartBadge();

    /* ------------- Toast ------------- */
    const toastEl = document.getElementById('toast');
    let toastTimer = null;
    function showToast(text, ms = 1600) {
      toastEl.textContent = text;
      toastEl.style.display = 'block';
      clearTimeout(toastTimer);
      toastTimer = setTimeout(()=> { toastEl.style.display = 'none'; }, ms);
    }

    /* ------------- Account / Cart panel ------------- */
    const overlay = document.getElementById('overlay');
    const panelBody = document.getElementById('panel-body');
    const panelSub = document.getElementById('panel-sub');
    const totalText = document.getElementById('total-text');

    document.getElementById('open-account').addEventListener('click', ()=> {
      overlay.style.display = 'flex';
      renderCartPanel();
    });
    document.getElementById('open-cart').addEventListener('click', ()=> {
      overlay.style.display = 'flex';
      renderCartPanel();
    });
    document.getElementById('close-overlay').addEventListener('click', ()=> overlay.style.display = 'none');
    overlay.addEventListener('click', (e) => {
      if (e.target === overlay) overlay.style.display = 'none';
    });

    document.getElementById('clear-cart').addEventListener('click', ()=> {
      if (!confirm('–û—á–∏—Å—Ç–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É?')) return;
      S7Cart.clear();
      showToast('–ö–æ—Ä–∑–∏–Ω–∞ –æ—á–∏—â–µ–Ω–∞');
    });

    document.getElementById('checkout').addEventListener('click', ()=> {
      const cart = S7Cart.getCart();
      if (!cart.length) { showToast('–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞'); return; }
      // –∑–¥–µ—Å—å –º–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
      console.log('–û—Ñ–æ—Ä–º–ª—è–µ–º –∑–∞–∫–∞–∑:', cart);
      showToast('–ó–∞–∫–∞–∑ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω (–¥–µ–º–æ)');
      S7Cart.clear();
      overlay.style.display = 'none';
    });

    function formatPrice(num) {
      return String(num).replace(/\B(?=(\d{3})+(?!\d))/g, ' ') + ' ‚ÇΩ';
    }

    function renderCartPanel() {
      const cart = loadCart();
      panelBody.innerHTML = '';
      if (!cart.length) {
        panelBody.innerHTML = '<div class="muted">–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞.</div>';
        totalText.textContent = '–ò—Ç–æ–≥–æ: 0 ‚ÇΩ';
        panelSub.textContent = '–ó–¥–µ—Å—å —Ö—Ä–∞–Ω—è—Ç—Å—è —Ç–æ–≤–∞—Ä—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –¥–æ–±–∞–≤–∏–ª–∏';
        renderCartBadge();
        return;
      }
      cart.forEach((it, idx) => {
        const row = document.createElement('div');
        row.className = 'cart-item';
        row.innerHTML = `
          <img src="${it.image}" alt="${it.title}">
          <div style="flex:1">
            <div style="font-weight:700">${it.title}</div>
            <div class="muted">${formatPrice(it.price)} √ó ${it.qty} = <strong>${formatPrice(it.price * it.qty)}</strong></div>
          </div>
          <div style="display:flex;flex-direction:column;align-items:flex-end;gap:8px">
            <div class="qty-controls">
              <button class="btn small dec">‚àí</button>
              <div style="min-width:28px;text-align:center">${it.qty}</div>
              <button class="btn small inc">+</button>
            </div>
            <button class="btn small" style="background:#fff;border:1px solid var(--line);color:#111" data-remove>–£–¥–∞–ª–∏—Ç—å</button>
          </div>
        `;
        // bind buttons
        row.querySelector('.dec').addEventListener('click', ()=> {
          S7Cart.changeQty(idx, -1);
          showToast('–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±–Ω–æ–≤–ª–µ–Ω–æ');
        });
        row.querySelector('.inc').addEventListener('click', ()=> {
          S7Cart.changeQty(idx, +1);
          showToast('–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±–Ω–æ–≤–ª–µ–Ω–æ');
        });
        row.querySelector('[data-remove]').addEventListener('click', ()=> {
          if (!confirm('–£–¥–∞–ª–∏—Ç—å —Ç–æ–≤–∞—Ä?')) return;
          S7Cart.removeItem(idx);
          showToast('–¢–æ–≤–∞—Ä —É–¥–∞–ª—ë–Ω');
        });
        panelBody.appendChild(row);
      });

      // total
      const total = cart.reduce((s,i)=> s + (Number(i.price)||0) * (Number(i.qty)||0), 0);
      totalText.textContent = '–ò—Ç–æ–≥–æ: ' + formatPrice(total);
      panelSub.textContent = `–¢–æ–≤–∞—Ä–æ–≤: ${cart.length}`;
      renderCartBadge();
    }

    // initial render
    renderCartBadge();

    /* ------------- Optional: filter / sort (basic) ------------- */
    document.getElementById('sort-select').addEventListener('change', (e)=>{
      const val = e.target.value;
      let list = [...products];
      if (val === 'cheap') list.sort((a,b)=> a.price - b.price);
      if (val === 'expensive') list.sort((a,b)=> b.price - a.price);
      renderProducts(list);
    });

    // price filter
    document.getElementById('min-price').addEventListener('change', applyFilters);
    document.getElementById('max-price').addEventListener('change', applyFilters);
    document.getElementById('country-ru').addEventListener('change', applyFilters);

    function applyFilters() {
      const min = Number(document.getElementById('min-price').value) || 0;
      const max = Number(String(document.getElementById('max-price').value).replace(/\s/g,'')) || 1e9;
      // country filter not applied because products don't have country; placeholder for future
      const list = products.filter(p => p.price >= min && p.price <= max);
      renderProducts(list);
    }
  </script>
</body>
</html>
