<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Техника полёта — интерактивный самолёт</title>
<style>
  :root{
    --accent:#c7eb00;
    --accent-dark:#97b900;
    --bg:#ffffff;
    --muted:#888;
    --dot-size:18px;
    --magnifier-size:220px;
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family: "Rubik", "Segoe UI", Arial, sans-serif;
    background:var(--bg);
    color:#222;
  }

  /* HERO */
  .hero{
    position:relative;
    width:100%;
    height:80vh;
    min-height:520px;
    overflow:visible;
  }

  /* контейнер картинки (центрируем и делаем cover-like) */
  .plane-wrap{
    position:absolute;
    left:50%;
    top:50%;
    transform:translate(-50%,-50%);
    width:1200px;           /* можно регулировать масштаб самолёта */
    max-width:95%;
    height:auto;
    pointer-events:none;
  }
  .plane-img{
    display:block;
    width:100%;
    height:auto;
    filter:grayscale(90%) brightness(1.05); /* фон затемнённый / бледный */
    pointer-events:auto;
  }

  /* заголовок */
  .hero-title{
    position:absolute;
    top:6%;
    left:50%;
    transform:translateX(-50%);
    font-size:88px;
    font-weight:800;
    color:var(--accent);
    letter-spacing:2px;
    white-space:nowrap;
    pointer-events:none;
    text-transform:uppercase;
  }
  @media(max-width:900px){
    .hero-title{font-size:44px;}
  }

  /* слой для точки / линий / магнификатора - накладывается поверх изображения */
  .overlay{
    position:absolute;
    inset:0;
    pointer-events:auto;
  }

  /* точки (hotspots) */
  .hotspot{
    position:absolute;
    width:var(--dot-size);
    height:var(--dot-size);
    border-radius:50%;
    background:var(--accent);
    box-shadow:0 6px 20px rgba(0,0,0,0.12);
    border:4px solid rgba(255,255,255,0.9);
    transform:translate(-50%,-50%);
    cursor:pointer;
    transition:transform .18s ease, box-shadow .18s ease;
    display:flex;
    align-items:center;
    justify-content:center;
  }
  .hotspot:hover{ transform:translate(-50%,-50%) scale(1.12); box-shadow:0 12px 30px rgba(0,0,0,0.18); }

  /* внутреннее белое кольцо (как на образце) */
  .hotspot::after{
    content:"";
    width:10px; height:10px; border-radius:50%;
    background:transparent; border:3px solid #fff;
  }

  /* magnifier (увеличительное кольцо, позиционируется по выбранной точке) */
  .magnifier{
    position:absolute;
    width:var(--magnifier-size);
    height:var(--magnifier-size);
    border-radius:50%;
    border:4px solid var(--accent);
    box-shadow:0 14px 40px rgba(0,0,0,0.15);
    overflow:hidden;
    pointer-events:none;
    transform:translate(-50%,-50%);
    transition:all .28s cubic-bezier(.2,.9,.3,1);
    background-repeat:no-repeat;
    background-size:1200px auto; /* важно: совпадает с plane-wrap width для корректной подгонки */
    background-position:center center;
    opacity:0;
  }
  .magnifier.visible{ opacity:1; }

  /* соединительная линия от magnifier к карточке описания (SVG линия) */
  .connector{
    position:absolute;
    left:0; top:0;
    width:100%; height:100%;
    pointer-events:none;
  }

  /* панель описания (внизу справа) */
  .info-panel{
    position:absolute;
    right:6%;
    bottom:6%;
    width:420px;
    max-width:42%;
    background:transparent;
    pointer-events:auto;
  }
  .info-line{
    height:2px;
    width:260px;
    background:linear-gradient(90deg,var(--accent) 0,var(--accent) 60%, rgba(0,0,0,0.08) 100%);
    margin-bottom:18px;
    transform-origin:left center;
  }
  .info-title{ font-weight:700; color:#444; margin:0 0 8px 0; font-size:18px; }
  .info-desc{ color:var(--muted); line-height:1.5; font-size:14px; margin:0; }

  /* точка активна */
  .hotspot.active{ box-shadow:0 18px 48px rgba(0,0,0,0.22); transform:translate(-50%,-50%) scale(1.18); }

  /* мобильные подстройки */
  @media(max-width:1000px){
    .plane-wrap{ width:1000px; }
    .info-panel{ right:4%; bottom:4%; width:46%; }
  }
  @media(max-width:700px){
    .hero-title{ top:3%; font-size:26px; left:6%; transform:none; text-align:left; }
    .info-panel{ position:static; width:92%; margin:18px auto 40px auto; right:auto; bottom:auto; }
    .overlay{ pointer-events:none; }
    .hotspot{ display:none; }
    .magnifier{ display:none; }
  }
</style>
</head>
<body>

<section class="hero" aria-label="Интерактивный самолет">
  <div class="plane-wrap" id="planeWrap">
    <!-- твоя фотография самолёта -->
    <img src="2025-11-20_19-20-02 (1).png" alt="Самолёт" class="plane-img" id="planeImg">
  </div>

  <h1 class="hero-title">Техника полёта</h1>

  <div class="overlay" id="overlay">
    <!-- hotspots: data-x и data-y — проценты (0..100) по отношению к изображению (plane-wrap) -->
    <!-- Подстрой позиции в HTML при необходимости -->
    <div class="hotspot" data-id="radar" data-x="74" data-y="62" title="Метеорадар"></div>
    <div class="hotspot" data-id="engine" data-x="83" data-y="72" title="Двигатель"></div>
    <div class="hotspot" data-id="nose" data-x="92" data-y="38" title="Носовой обтекатель"></div>
    <div class="hotspot" data-id="wingtip" data-x="12" data-y="46" title="Концевой гребень крыла"></div>
    <div class="hotspot" data-id="tail" data-x="6" data-y="28" title="Хвостовая часть"></div>
    <div class="hotspot" data-id="flap" data-x="69" data-y="54" title="Закрылки"></div>

    <!-- SVG слой для линии (connector) -->
    <svg class="connector" id="connectorSvg" aria-hidden="true"></svg>

    <!-- magnifier (круг-лупа) -->
    <div class="magnifier" id="magnifier" role="presentation" aria-hidden="true"></div>
  </div>

  <!-- панель описания (изменяется при клике на hotspot) -->
  <div class="info-panel" id="infoPanel" aria-live="polite">
    <div class="info-line" id="infoLine"></div>
    <h3 class="info-title" id="infoTitle">Выберите точку</h3>
    <p class="info-desc" id="infoDesc">Нажмите на зелёную точку на самолёте — появится информация о системе и увеличенный фрагмент.</p>
  </div>
</section>

<script>
  (function(){
    const planeWrap = document.getElementById('planeWrap');
    const planeImg = document.getElementById('planeImg');
    const overlay = document.getElementById('overlay');
    const hotspots = Array.from(overlay.querySelectorAll('.hotspot'));
    const magnifier = document.getElementById('magnifier');
    const connectorSvg = document.getElementById('connectorSvg');
    const infoTitle = document.getElementById('infoTitle');
    const infoDesc = document.getElementById('infoDesc');
    const infoLine = document.getElementById('infoLine');

    // данные описаний (можешь расширять / менять)
    const DATA = {
      radar: {
        title: "Метеорадар",
        desc: "Плоская антенна внутри носового обтекателя сканирует пространство перед самолетом: выявляет зоны осадков и грозовые облака, зоны турбулентности, показывает скорость и направление ветра."
      },
      engine: {
        title: "Двигатель",
        desc: "Современные турбовентиляторные двигатели обеспечивают высокий КПД и надежность, снижая расход топлива и уровень шума."
      },
      nose: {
        title: "Носовой обтекатель",
        desc: "В нём размещена авионика и антенны, он оптимизирован для минимального аэродинамического сопротивления."
      },
      wingtip: {
        title: "Концевой гребень крыла",
        desc: "Специальные законцовки крыла уменьшают индуктивное сопротивление и повышают экономичность полёта."
      },
      tail: {
        title: "Хвостовая часть",
        desc: "Стабилизаторы и рулевые поверхности отвечают за устойчивость и маневренность самолёта."
      },
      flap: {
        title: "Закрылки",
        desc: "Механизмы закрылков увеличивают подъёмную силу на взлёте и посадке, уменьшая скорость касания."
      }
    };

    // Устанавливаем первоначальные background-size соответствующим ширине planeWrap
    function updateMagnifierBgSize(){
      const w = planeWrap.clientWidth;
      magnifier.style.backgroundSize = w + "px auto";
      // Также задаём фон-изображение (совпадает с src)
      magnifier.style.backgroundImage = `url("${planeImg.src}")`;
    }

    // позиция точек по % внутри planeWrap
    function positionHotspots(){
      const rect = planeWrap.getBoundingClientRect();
      hotspots.forEach(h => {
        const x = parseFloat(h.dataset.x);
        const y = parseFloat(h.dataset.y);
        // абсолютные координаты внутри overlay
        const left = rect.left + (x/100) * rect.width;
        const top  = rect.top  + (y/100) * rect.height;
        // позиционируем элемент (overlay is full-screen, so use viewport coords)
        h.style.left = ( (x) + "%" );
        h.style.top  = ( (y) + "%" );
      });
      // update magnifier background size after layout change
      updateMagnifierBgSize();
    }

    // рисуем линию (декоративная :: от точки к info panel)
    function drawConnector(fromX, fromY){
      const svg = connectorSvg;
      const rect = svg.getBoundingClientRect();
      // получаем целевую точку — левый верх infoLine
      const infoRect = infoLine.getBoundingClientRect();
      const toX = infoRect.left + 12; // небольшой сдвиг
      const toY = infoRect.top + infoRect.height/2;
      // координаты относительно SVG
      const startX = fromX - rect.left;
      const startY = fromY - rect.top;
      const endX = toX - rect.left;
      const endY = toY - rect.top;
      // кривые для приятного угла
      const dx = Math.abs(endX - startX) * 0.45;
      const path = `M ${startX} ${startY} C ${startX + dx} ${startY} ${endX - dx} ${endY} ${endX} ${endY}`;
      // вставляем/обновляем path
      svg.innerHTML = `<path d="${path}" stroke="${getComputedStyle(document.documentElement).getPropertyValue('--accent')}" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" opacity="0.95"/>`;
    }

    // при выборе точки: активируем, обновляем инфо, позиционируем magnifier
    function activateHotspot(elem){
      hotspots.forEach(h=>h.classList.remove('active'));
      elem.classList.add('active');
      const id = elem.dataset.id;
      const data = DATA[id] || { title: elem.title || "Инфо", desc: "" };
      infoTitle.textContent = data.title;
      infoDesc.textContent = data.desc;

      // Рассчитаем координаты центра точки в viewport
      const rectWrap = planeWrap.getBoundingClientRect();
      const xPct = parseFloat(elem.dataset.x);
      const yPct = parseFloat(elem.dataset.y);
      const cx = rectWrap.left + (xPct/100)*rectWrap.width;
      const cy = rectWrap.top  + (yPct/100)*rectWrap.height;

      // Позиционируем magnifier: ставим центр немного правее точки (по дизайну)
      const magOffsetX = 0; // можно смещать
      magnifier.style.left = ( (xPct) + "%" );
      magnifier.style.top  = ( (yPct - 4) + "%" ); // поднять чуть выше центра для эстетики
      magnifier.classList.add('visible');

      // вычисляем background-position для magnifier так, чтобы внутри кружка показывался участок вокруг точки
      // background-position в процентах относительно изображения: процент соответствующий точки
      // Но image displayed width equals planeWrap.width (мы установили background-size accordingly)
      const bgPosX = xPct;
      const bgPosY = yPct;
      magnifier.style.backgroundPosition = `${bgPosX}% ${bgPosY}%`;
      // масштаб (увеличение) мы контролируем через background-size (уже задано); при необходимости можно увеличить
      // строим линию от точки до info panel
      drawConnector(cx, cy);
    }

    // сброс (скрыть magnifier)
    function deactivate(){
      hotspots.forEach(h=>h.classList.remove('active'));
      magnifier.classList.remove('visible');
      connectorSvg.innerHTML = "";
      infoTitle.textContent = "Выберите точку";
      infoDesc.textContent = "Нажмите на зелёную точку на самолёте — появится информация о системе и увеличенный фрагмент.";
    }

    // навешиваем события
    hotspots.forEach(h=>{
      h.addEventListener('click', (e)=>{
        e.stopPropagation();
        activateHotspot(h);
      });
    });

    // клик вне — сброс
    document.addEventListener('click', (e)=>{
      // если клик не по hotspot — скрываем
      if(!e.target.closest('.hotspot')) deactivate();
    });

    // при ресайзе пересчитываем позиции и background-size
    window.addEventListener('resize', ()=>{
      positionHotspots();
    });

    // при загрузке изображения — позиционируем точки
    if(planeImg.complete){
      // small timeout чтобы layout утвердился
      setTimeout(positionHotspots,50);
      setTimeout(updateMagnifierBgSize,50);
    } else {
      planeImg.addEventListener('load', ()=>{
        setTimeout(positionHotspots,50);
        setTimeout(updateMagnifierBgSize,50);
      });
    }

    // начальная подсказка — можно активировать одну точку по умолчанию (раскомментировать)
    // setTimeout(()=>activateHotspot(hotspots[2]), 700);

  })();
</script>

</body>
</html>

